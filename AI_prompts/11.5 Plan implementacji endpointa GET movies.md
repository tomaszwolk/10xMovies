Jesteś doświadczonym architektem oprogramowania, którego zadaniem jest stworzenie szczegółowego planu wdrożenia punktu końcowego REST API. Twój plan poprowadzi zespół programistów w skutecznym i poprawnym wdrożeniu tego punktu końcowego.

Zanim zaczniemy, zapoznaj się z poniższymi informacjami:

1. Route API specification:
<route_api_specification>
#### `GET /api/movies/`

-   **Description**: Searches for movies.
-   **Authentication**: None (public endpoint).
-   **Query Parameters**:
    -   `search` (string): The search query for the movie title (e.g., `?search=interstellar`).
-   **Success Response** (200 OK):
    ```json
    [
      {
        "tconst": "tt0816692",
        "primary_title": "Interstellar",
        "start_year": 2014,
        "avg_rating": "8.6",
        "poster_path": "https://image.tmdb.org/t/p/w500/gEU2QniE6E77NI6lCU6MxlNBvIx.jpg"
      }
    ]
    ```

**Error Responses**:
- `400 Bad Request`: Missing or invalid `search` parameter

**Business Logic**:
- Search is performed using case-insensitive, accent-insensitive matching on `primary_title`
- Utilizes GIN index on `public.immutable_unaccent(lower(primary_title))` using `extensions.gin_trgm_ops`
- Returns movies matching the search query
</route_api_specification>

2. Related database resources:
<related_db_resources>
### Table: `movie`
Primary table for this endpoint. Stores movie information imported from IMDb and enriched with other sources.

| Column | Data Type | Constraints | Description |
|---|---|---|---|
| `tconst` | `text` | **Primary Key** | IMDb unique identifier for the title (e.g., "tt0111161"). |
| `primary_title`| `text` | Not Null | The primary title of the movie. |
| `original_title`| `text` | | The original title of the movie, if different. |
| `start_year` | `smallint` | | The release year of the movie. |
| `genres` | `text[]` | | Array of movie genres. |
| `avg_rating` | `numeric(3, 1)` | | Average user rating. |
| `num_votes` | `integer` | | Number of votes for the rating. |
| `poster_path` | `text` | | URL path to the movie poster (from TMDB). |
| `poster_last_checked` | `timestamptz` | | When the poster path was last checked/updated. |
| `tmdb_id` | `bigint` | Indexed (partial, non-unique) | The Movie Database (TMDB) ID. |
| `watchmode_id` | `bigint` | Indexed (partial, non-unique) | Watchmode.com ID. |
| `created_at` | `timestamptz` | Not Null, `default now()` | Timestamp of record creation. |
| `updated_at` | `timestamptz` | Not Null, `default now()` | Timestamp of last record update. |

### Indexes for `movie`:
- **Partial Index (non-unique)** on `tmdb_id` WHERE `tmdb_id` IS NOT NULL.
- **Partial Index (non-unique)** on `watchmode_id` WHERE `watchmode_id` IS NOT NULL.
- **GIN Index** on `public.immutable_unaccent(lower(primary_title))` using `extensions.gin_trgm_ops` for fast, case-insensitive, accent-insensitive search.
- **B-Tree Index** on `start_year` for filtering by year.
- **GIN Index** on `genres` for filtering by genre.

**Note**: The GIN index on `public.immutable_unaccent(lower(primary_title))` using `extensions.gin_trgm_ops` is critical for this endpoint's search functionality.
</related_db_resources>

3. Definicje typów:
<type_definitions>
TypeScript types are defined in `myVOD/frontend/myVOD/src/types/api.types.ts`
</type_definitions>

4. Tech stack:
<tech_stack>
`.ai/tech-stack.md`.
</tech_stack>

5. Implementation rules:
<implementation_rules>
@shared.mdc
@backend.mdc
@django.mdc
@coding-practices.mdc
</implementation_rules>

Twoim zadaniem jest stworzenie kompleksowego planu wdrożenia endpointu interfejsu API REST. Przed dostarczeniem ostatecznego planu użyj znaczników <analysis>, aby przeanalizować informacje i nakreślić swoje podejście. W tej analizie upewnij się, że:

1. Podsumuj kluczowe punkty specyfikacji API.
2. Wymień wymagane i opcjonalne parametry ze specyfikacji API.
3. Wymień niezbędne typy DTO i Command Modele.
4. Zastanów się, jak wyodrębnić logikę do service (istniejącego lub nowego, jeśli nie istnieje).
5. Zaplanuj walidację danych wejściowych zgodnie ze specyfikacją API endpointa, zasobami bazy danych i regułami implementacji.
6. Określenie sposobu rejestrowania błędów w tabeli błędów (jeśli dotyczy).
7. Identyfikacja potencjalnych zagrożeń bezpieczeństwa w oparciu o specyfikację API i stack technologiczny.
8. Nakreśl potencjalne scenariusze błędów i odpowiadające im kody stanu.

Po przeprowadzeniu analizy utwórz szczegółowy plan wdrożenia w formacie markdown. Plan powinien zawierać następujące sekcje:

1. Przegląd punktu końcowego
2. Szczegóły żądania
3. Szczegóły odpowiedzi
4. Przepływ danych
5. Względy bezpieczeństwa
6. Obsługa błędów
7. Wydajność
8. Kroki implementacji

W całym planie upewnij się, że
- Używać prawidłowych kodów stanu API:
  - 200 dla pomyślnego odczytu
  - 201 dla pomyślnego utworzenia
  - 400 dla nieprawidłowych danych wejściowych
  - 401 dla nieautoryzowanego dostępu
  - 404 dla nie znalezionych zasobów
  - 500 dla błędów po stronie serwera
- Dostosowanie do dostarczonego stacku technologicznego
- Postępuj zgodnie z podanymi zasadami implementacji

Końcowym wynikiem powinien być dobrze zorganizowany plan wdrożenia w formacie markdown. Oto przykład tego, jak powinny wyglądać dane wyjściowe:

``markdown
# API Endpoint Implementation Plan: [Nazwa punktu końcowego]

## 1. Przegląd punktu końcowego
[Krótki opis celu i funkcjonalności punktu końcowego]

## 2. Szczegóły żądania
- Metoda HTTP: [GET/POST/PUT/DELETE]
- Struktura URL: [wzorzec URL]
- Parametry:
  - Wymagane: [Lista wymaganych parametrów]
  - Opcjonalne: [Lista opcjonalnych parametrów]
- Request Body: [Struktura treści żądania, jeśli dotyczy]

## 3. Wykorzystywane typy
[DTOs i Command Modele niezbędne do implementacji]

## 3. Szczegóły odpowiedzi
[Oczekiwana struktura odpowiedzi i kody statusu]

## 4. Przepływ danych
[Opis przepływu danych, w tym interakcji z zewnętrznymi usługami lub bazami danych]

## 5. Względy bezpieczeństwa
[Szczegóły uwierzytelniania, autoryzacji i walidacji danych]

## 6. Obsługa błędów
[Lista potencjalnych błędów i sposób ich obsługi]

## 7. Rozważania dotyczące wydajności
[Potencjalne wąskie gardła i strategie optymalizacji]

## 8. Etapy wdrożenia
1. [Krok 1]
2. [Krok 2]
3. [Krok 3]
...
```

Końcowe wyniki powinny składać się wyłącznie z planu wdrożenia w formacie markdown i nie powinny powielać ani powtarzać żadnej pracy wykonanej w sekcji analizy.

Pamiętaj, aby zapisać swój plan wdrożenia jako .ai/view-implementation-plan.md. Upewnij się, że plan jest szczegółowy, przejrzysty i zapewnia kompleksowe wskazówki dla zespołu programistów.