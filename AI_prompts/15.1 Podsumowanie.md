<conversation_summary>
<decisions>
1. Użytkownik zgodził się na hierarchię widoków z dashboardem watchlisty jako domyślnym po logowaniu, onboardingiem po rejestracji i zakładkami dla obejrzanych/sugestii.
2. Użytkownik zaakceptował sekwencyjny przepływ onboardingu w trzech krokach (wybór platform, dodanie 3 filmów do watchlisty, oznaczenie 3 obejrzanych), z opcją skip i integracją z API.
3. Użytkownik potwierdził responsywny design z gridami (1 kolumna na mobile, 3-4 na desktop) i touch-friendly elementami dla widoków watchlisty.
4. Użytkownik zdecydował o braku dodatkowych elementów dostępności dla MVP (np. ARIA labels, WCAG AA), ograniczając się do podstawowych.
5. Użytkownik zgodził się na automatyczne odświeżanie JWT tokenów via interceptor w Axios, z przekierowaniem do logowania przy 401.
6. Użytkownik zaakceptował spójny design system z shadcn/ui i Tailwind CSS, w tym kolory dla ikon VOD.
7. Użytkownik potwierdził użycie TanStack Query do zarządzania stanem i synchronizacji z API (query keys, invalidation po mutacjach).
8. Użytkownik zgodził się na obsługę błędów z toastami (react-hot-toast) dla kodów jak 429, 409, z user-friendly komunikatami.
9. Użytkownik sprecyzował reset sugestii AI na nowy dzień kalendarzowy (nie po 24h), z brakiem cache dla /api/suggestions/ jeśli niemożliwe do zaimplementowania.
10. Użytkownik zaakceptował nawigację z Tabs i React Router, z persistent filtrami w URL/localStorage.
11. Użytkownik zgodził się na komponenty jak Card/Table dla watchlisty, Combobox dla autocomplete, i AlertDialog dla confirm.
12. Użytkownik potwierdził empty states z ilustracjami i CTA, oraz optimistic updates z undo w toastach.
13. Użytkownik zaakceptował dark mode via Tailwind, i18n z react-i18next (en/pl), i toasty dla akcji.
14. Użytkownik zgodził się na paginację/virtualizację dla dużych list, prefetching dla performance, i protected routes.
15. Użytkownik potwierdził brak dodatkowych accessibility features poza podstawowymi.
</decisions>
<matched_recommendations>
1. Użyj shadcn/ui komponentów (Card, Table, Button, CheckboxGroup) dla spójnego UI w widokach watchlisty, profilu i onboardingu.
2. Zintegruj TanStack Query z query keys opartymi na statusie (np. ['user-movies', 'watchlist']) i mutacjami (POST/PATCH/DELETE /api/user-movies/) dla real-time sync.
3. Implementuj React Router z protected routes i dynamicznymi query params dla filtrowania/sortowania (ordering, is_available).
4. Obsługuj błędy API (401, 409, 429) z globalnym interceptor i toastami, w tym retry dla refresh token i graceful degradation.
5. Zaprojektuj onboarding jako multi-step wizard z Progress bar, integrując PATCH /api/me/ i batch POST /api/user-movies/.
6. Użyj Combobox dla autocomplete wyszukiwarki z debounce i max 10 wynikami, wyzwalając POST /api/user-movies/ po selekcji.
7. Wyświetlaj dostępność VOD jako kolorowe Badge ikony w Card, z local filtering dla "Ukryj niedostępne" i badge "Stan z: [data]".
8. Implementuj modal Dialog dla sugestii AI z Card listą (plakat, uzasadnienie, dodaj button), z dziennym limitem i checkiem duplikatów via cache.
9. Dodaj empty states z ilustracjami i CTA (np. link do wyszukiwarki) dla pustych watchlist/obeyrzanych/sugestii.
10. Użyj react-hot-toast dla potwierdzeń/undo (5s timeout) i AlertDialog dla confirm (usuwanie, RODO delete konta).
</matched_recommendations>
<ui_architecture_planning_summary>
### a. Główne wymagania dotyczące architektury UI
Architektura UI dla MVP MyVOD skupia się na prostocie i integracji z backendem Django REST, z naciskiem na zarządzanie watchlistą, onboardingiem i sugestiami AI. Kluczowe wymagania z PRD obejmują: wyszukiwarkę z autocomplete (limit 10 wyników), widoki kafelkowe/listowe watchlisty z ikonami VOD (5 platform: Netflix, HBO Max, Disney+, Prime Video, Apple TV+), oznaczanie obejrzanych, codzienne sugestie AI (5 filmów z uzasadnieniem), profil z edycją platform, RODO-compliant delete, i admin dashboard metryk. UI musi być responsywne (mobile-first), z podstawową dostępnością (bez WCAG AA dla MVP), i zoptymalizowane pod performance (paginacja dla >50 filmów).

### b. Kluczowe widoki, ekrany i przepływy użytkownika
- **Widoki główne**: Dashboard (watchlista z wyszukiwarką, filtrami/sortowaniem, przyciskiem sugestii AI); zakładka "Obejrzane" (podobna struktura, sort po dacie); modal sugestii AI; profil (email, checkboxy platform, delete konto); admin dashboard (metyki, charts).
- **Onboarding**: 3-krokowy wizard po rejestracji (wybór platform → dodaj 3 filmy do watchlisty z autocomplete → oznacz 3 obejrzane), z progress barem i skip; kończy routingiem do dashboardu.
- **Przepływy użytkownika**: Rejestracja/logowanie (/api/register/, /api/token/) → onboarding → dashboard (GET /api/user-movies/?status=watchlist) → wyszukaj/dodaj film (POST /api/user-movies/) → oznacz obejrzane (PATCH action=mark_as_watched) → sugestie (GET /api/suggestions/, limit dzienny kalendarzowy) → edytuj profil (PATCH /api/me/). Usuwanie: confirm dialog → DELETE/PATCH. Pusta watchlista: empty state z CTA do wyszukiwania.

### c. Strategia integracji z API i zarządzania stanem
Integracja via Axios z interceptor dla JWT (auto-refresh /api/token/refresh/, redirect na 401). TanStack Query zarządza stanem: query dla /api/movies/ (search), /api/user-movies/ (status, ordering, is_available), /api/suggestions/ (z dziennym resetem via date key, bez cache jeśli niemożliwe); mutacje dla POST/PATCH/DELETE /api/user-movies/ z optimistic updates i invalidation. Debounce dla search, prefetch dla dashboardu, infinite queries/paginacja (page/limit) dla dużych list. Local filtering (useMemo) dla "Ukryj niedostępne". Buforowanie: staleTime 24h dla sugestii (zależne od daty), refetch na focus/mount.

### d. Kwestie dotyczące responsywności, dostępności i bezpieczeństwa
- **Responsywność**: Tailwind CSS grid (1-2 kolumny mobile, 3-4 desktop), touch-friendly (większe buttony, swipe dla list), lazy loading plakatów (TMDB URL z placeholder na error).
- **Dostępność**: Podstawowa (role=checkbox dla platform, focus trap w modals); brak zaawansowanych features (ARIA, screen reader) dla MVP.
- **Bezpieczeństwo**: Protected routes (auth guard z token check), secure token storage (localStorage z ostrzeżeniem), RODO delete (hard delete wszystkich danych użytkownika z confirm), rate limiting UI dla AI (disable button po limicie z timerem). Global error boundary dla network errors z retry.

### e. Wszelkie nierozwiązane kwestie lub obszary wymagające dalszego wyjaśnienia
Patrz sekcja <unresolved_issues>.
</ui_architecture_planning_summary>
<unresolved_issues>
1. Implementacja dziennego resetu cache dla /api/suggestions/ (kalendarzowo vs 24h) – jeśli niemożliwe w TanStack Query, brak cache może wpłynąć na performance; wymaga testów.
2. Szczegóły admin dashboardu: Czy użyć Django admin czy dedykowanego frontend UI z custom API endpoints? Brak decyzji o roli admin w auth.
3. Performance dla dużych datasetów: Czy dodać virtualizację (react-window) obligatoryjnie, czy tylko przy >50 filmach? Testy potrzebne.
4. i18n zakres: Czy tylko en/pl, czy dodać auto-detect? Brak specyfikacji dla formatów dat (np. PL: DD.MM.YYYY).
5. Dark mode: Czy toggle w profilu z persistencją, czy auto z system? Brak decyzji o testach kontrastu dla VOD ikon.
</unresolved_issues>
</conversation_summary>